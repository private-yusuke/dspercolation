# パーコレーション体感アプリ

授業課題の実装です。

## 概要

これは、物理学における**パーコレーション理論の相転移**を、DualSense ワイヤレスコントローラーを使って視覚的・触覚的に体感できるインタラクティブなシミュレーションです。

`pygame` によるシミュレーション画面と、`pydualsense` ライブラリによるコントローラー連携を組み合わせています。R2 トリガーを引くことで格子の占有率 p を操作し、パーコレーション（浸透）が起きる臨界点を探求できます。相転移が起きる直前のアダプティブトリガーの抵抗やハプティックフィードバックにより、パーコレーションの世界に没入できます。

## 特徴

- **インタラクティブな可視化**: 格子上でパーコレーションの様子をリアルタイムに描画します。
- **触覚フィードバック**:
    - **ハプティック振動**: パーコレーションが発生している間、コントローラーが振動し続けます。
    - **アダプティブトリガー**:  p  の値が臨界点に近づくにつれて R2 トリガーの抵抗が指数関数的に強まります。
- **視覚フィードバック**:
    - **ライトバー**:  p  の値に応じてコントローラーのライトバーの色が青から赤へ変化し、パーコレーション発生中は白く光ります。
- **柔軟なパラメータ調整**:
    - シミュレーションの探求範囲である  p  の**下限 (Lower)・上限 (Upper)**、そしてトリガー抵抗の基準となる**臨界点 (Critical)**をコントローラーで動的に調整可能です。
    - 「これだ！」と思った  p  の値を、× ボタン一つで各パラメータに設定できます。

## 動作要件

- Python 3.13 以上
- uv
- DualSense ワイヤレスコントローラー

コントローラーを USB 接続した macOS 15.3.2 環境での動作を確認しています。

## インストールと実行

1. リポジトリをクローンします
    ```bash
    git clone https://github.com/private-yusuke/dspercolation.git
    cd dspercolation
    ```
2. アプリケーションを実行します
   必ずコントローラーをPCに接続した状態で実行してください。
    ```bash
    uv run main.py
    ```

## 操作方法

| 操作 | コントローラー | キーボード | 説明 |
| :--- | :--- | :--- | :--- |
| **占有率  p  の変更** | R2 トリガーを引く | - | トリガーを引く深さに応じて、設定した範囲内で p の値が変化します。 |
| **パラメータの選択** | D-Pad の上下 | ↑↓ キー | Lower, Upper, Critical の中から編集したい項目を選択します。 |
| **パラメータの値の調整** | 右アナログスティックの左右 | - | 選択中の項目の値を微調整します。 |
| **現在の  p  を値に設定** |  ×  ボタン | - | 選択中の項目に、その瞬間の p の値を設定します。 |
| **終了** | - | ウィンドウを閉じる | アプリケーションを終了します。 |
